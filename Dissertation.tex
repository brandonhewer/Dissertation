% !TeX root = Dissertation.tex
\documentclass[11pt,openright,hidelinks,a4paper]{article}

\input{Definitions/DissertationDefs}
\input{Design/FormalGrammars/GrammarTerminals}

\graphicspath{ {./Images/} }

\makeatletter
\providecommand*{\input@path}{}
\g@addto@macro\input@path{
  {./Introduction//}
  {./LiteratureReview//}
    {./LiteratureReview/CategoricalSemantics//}{./CategoricalSemantics//}
    {./LiteratureReview/CategoryTheory//}{./CategoryTheory//}
    {./LiteratureReview/CompositionAsReachability//}{./CompositionAsReachability//}
    {./LiteratureReview/ParametricPolymorphism//}{./ParametricPolymorphism//}
  {./TowardsATool//}
    {./TowardsATool/HindleyMilner//}{./HindleyMilner//}
    {./TowardsATool/Reflection//}{./Reflection//}
    {./TowardsATool/SystemFK//}{./SystemFK//}
    {./TowardsATool/TypeToPetriNet//}{./TypeToPetriNet//}
    {./TowardsATool/Unification//}{./Unification//}
  {./Design//}
    {./Design/FormalGrammars//}{./FormalGrammars//}
  {./Features//}
  {./FutureWork//}
  {./Results//}
  {./Conclusion//}
}
\makeatother

\usetikzlibrary{arrows,shapes,automata,petri,cd}

\tikzset{
  place/.style={
    circle,
    thick,
    draw=black!75,
    fill=white!20,
    minimum size=6mm
  },
  transition/.style={
    rectangle,
    thick,
    fill=black,
    minimum width=8mm,
    inner ysep=2pt
  }
}

\setcounter{page}{0}
\pagenumbering{roman}

\title{A System for Exploring the Relationship Between Dinaturality and Parametric Polymorphism}
\author{Brandon Hewer}
\date{Bachelor of Science in Computer Science with Honours\\The University of Bath\\May 2019}

\begin{document}

\maketitle

\newpage

% Set this to the number of years consultation prohibition, or 0 if no limit
\consultation{0}
\newpage


\declaration{A System for Exploring the Relationship Between Dinaturality and Parametric Polymorphism}{Brandon Hewer}
\newpage

\includepdf[pages=1,scale=0.74]{Coversheet.pdf}

\begin{abstract}
Parametric polymorphism has pervaded many of the most prominent, modern programming languages. Perhaps the most prevalent use case, is in the construction of generic code. Furthermore, the uniformity property of parametrically polymorphic functions can be used to justify particular program transformations.
\par 
Dinatural transformations have been investigated as a formal model for parametric polymorphism. Unfortunately dinatural transformations suffer from a troublesome shortcoming; they do not, in general, compose. Indeed, this complicates the relationship between parametric polymorphism and dinaturality. Understanding the circumstances under which dinatural transformations, in the most general formulation, do not compose, may assist in resolving this dilemma.
\par
This paper first introduces a novel extension to the Hindley-Milner type system, termed System $F_\kappa$. Types in System $F_\kappa$ are used to design a tool for exploring the relationship between dinaturality and parametric polymorphism, in a generalised functorial calculus. This tool generates an interactive graph, known as a Petri net, to depict the naturality condition of a function type in System $F_\kappa$.
\end{abstract}
\newpage

\tableofcontents
\newpage
\listoffigures

\newpage

\section*{Acknowledgements}
I would like to thank my project supervisor, Prof. Guy McCusker, for all of his advice, and his consistent enthusiasm. Moreover, I would like to offer sincere gratitude for his assistance and encouragement in my pursuit of future research opportunities.
\newpage

\setcounter{page}{1}
\pagenumbering{arabic}

\subfile{Introduction}
\newpage
\subfile{LiteratureReview}
\newpage
\subfile{TowardsATool}
\newpage
\subfile{Design}
\newpage
\subfile{Features}
\newpage
\subfile{Results}
\newpage
\subfile{FutureWork}

\newpage

\bibliography{./LiteratureReview/CategoricalSemantics/CategoricalSemantics,./LiteratureReview/CategoryTheory/CategoryTheory,./LiteratureReview/ParametricPolymorphism/ParametricPolymorphism,./LiteratureReview/CompositionAsReachability/CompositionAsReachability,./TowardsATool/TowardsATool,./FutureWork/FutureWork}

\newpage

\appendix

\section{Conditions in Different Type Variables}\label{app:differentvars}

\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.45]{applytofirsta}
\end{center}
\caption{Petri net generated for type variable \lstinline{a} of \lstinline{applyToFirst}.}
\label{fig:applyToFirstA}
\end{figure}

\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.45]{applytofirstb}
\end{center}
\caption{Petri net generated for type variable \lstinline{b} of \lstinline{applyToFirst}.}
\label{fig:applyToFirstB}
\end{figure}

\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.45]{applytofirstc}
\end{center}
\caption{Petri net generated for type variable \lstinline{c} of \lstinline{applyToFirst}.}
\label{fig:applyToFirstC}
\end{figure}

\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.45]{typea}
\end{center}
\caption{Petri net generated for variable \lstinline{a} of \lstinline{F a- a b- c => G a b- c}.}
\label{fig:typea}
\end{figure}

\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.45]{typeb}
\end{center}
\caption{Petri net generated for variable \lstinline{b} of \lstinline{F a- a b- c => G a b- c}.}
\label{fig:typeb}
\end{figure}

\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.45]{typec}
\end{center}
\caption{Petri net generated for variable \lstinline{c} of \lstinline{F a- a b- c => G a b- c}.}
\label{fig:typec}
\end{figure}

\section{Iterated Composition}\label{app:itcomp}
\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.45]{compose2}
\end{center}
\caption{Generation of a Petri net by iterated composition.}
\label{fig:compose2}
\end{figure}

\section{Modifying Naturality Types}\label{app:modcomp}

\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.45]{natcompose2}
\end{center}
\caption{Composition of components; one with a modified naturality type.}
\label{fig:natcompose}
\end{figure}

\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.45]{natcompose}
\end{center}
\caption{Composition of components with modified naturality types.}
\label{fig:natcompose2}
\end{figure}

\section{Local Scaling and Translation}\label{app:zoomtrans}

\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.45]{lefttranslate}
\end{center}
\caption{Large composite Petri net translated to the left.}
\label{fig:lefttranslate}
\end{figure}

\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.45]{righttranslate}
\end{center}
\caption{Large composite Petri net translated to the right.}
\label{fig:righttranslate}
\end{figure}

\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.45]{zoomedin}
\end{center}
\caption{Zoomed in to a large composite Petri net.}
\label{fig:zoomedin}
\end{figure}

\section{Dinaturals in the Wild}\label{app:wilddinaturals}

\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.45]{filter}
\end{center}
\caption{Petri net generated for variable \lstinline{a} of \lstinline{filter}.}
\label{fig:filter}
\end{figure}

\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.45]{foldr}
\end{center}
\caption{Petri net generated for variable \lstinline{b} of \lstinline{foldr}.}
\label{fig:foldr}
\end{figure}

\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.45]{span}
\end{center}
\caption{Petri net generated for variable \lstinline{a} of \lstinline{span}.}
\label{fig:foldr}
\end{figure}

\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.45]{groupBy}
\end{center}
\caption{Petri net generated for variable \lstinline{a} of \lstinline{groupBy}.}
\label{fig:groupBy}
\end{figure}

\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.45]{insertBy}
\end{center}
\caption{Petri net generated for variable \lstinline{a} of \lstinline{insertBy}.}
\label{fig:insertBy}
\end{figure}

\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.45]{dicata}
\end{center}
\caption{Petri net generated for variable \lstinline{a} of \lstinline{dicata}.}
\label{fig:dicata}
\end{figure}

\begin{figure}[H]
\begin{center}
\includegraphics[scale=0.45]{prepro}
\end{center}
\caption{Petri net generated for variable \lstinline{a} of \lstinline{prepro}.}
\label{fig:prepro}
\end{figure}


\end{document}
